@{
    ViewData["Title"] = "Avgångar";
    DateTime today = DateTime.Now;

    string dateDropdown = "";
    if (ViewBag.Date == today.ToString("yyyy-MM-dd"))
    {
        dateDropdown = "Idag";
    }
    else if (ViewBag.Date == today.AddDays(-1).ToString("yyyy-MM-dd"))
    {
        dateDropdown = "Igår";
    }
    else if (ViewBag.Date == today.AddDays(1).ToString("yyyy-MM-dd"))
    {
        dateDropdown = "Imorgon";
    }
    else
    {
        dateDropdown = ViewBag.Date;
    }

    string timeDropdown = ViewBag.Time;

    var flights = ViewBag.Flights;

}


<div class="col-12">
    <!-- Breadcrumb -->
    <nav style="--bs-breadcrumb-divider: '/';" aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-area="" asp-controller="Home" asp-action="Index">Göteborg LANDVETTER</a></li>
            <li class="breadcrumb-item active" aria-current="page">Avgångar</li>
        </ol>
    </nav>

    <!-- Header -->
    <div class="col-12 d-flex justify-content-between">
        @*<h2 class="text-primary">LANDVETTER</h2>*@

        <!-- Filter Date -->
        <div class="mt-2 mb-2 d-flex col-2">
            <!-- dropdown  Filter-->
            <div class="dropdown ms-2 me-5">
                <a class="btn  btn-outline-primary dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    @dateDropdown
                </a>
                <ul class="dropdown-menu">
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="date" value="@today.AddDays(-1).ToString("yyyy-MM-dd")">
                            <button input="submit" class="dropdown-item">Igår</button>
                        </form>
                    </li>
                    <li class="">
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="date" value="@today.ToString("yyyy-MM-dd")">
                            <button input="submit" class="dropdown-item">Idag</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="date" value="@today.AddDays(1).ToString("yyyy-MM-dd")">
                            <button input="submit" class="dropdown-item">Imorgon</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="date" value="@today.AddDays(2).ToString("yyyy-MM-dd")">
                            <button input="submit" class="dropdown-item">@today.AddDays(2).ToString("yyyy-MM-dd")</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="date" value="@today.AddDays(3).ToString("yyyy-MM-dd")">
                            <button input="submit" class="dropdown-item">@today.AddDays(3).ToString("yyyy-MM-dd")</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="date" value="@today.AddDays(4).ToString("yyyy-MM-dd")">
                            <button input="submit" class="dropdown-item">@today.AddDays(4).ToString("yyyy-MM-dd")</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="date" value="@today.AddDays(5).ToString("yyyy-MM-dd")">
                            <button input="submit" class="dropdown-item">@today.AddDays(5).ToString("yyyy-MM-dd")</button>
                        </form>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Filter Time -->
        <div class="mt-2 mb-2 d-flex col-2">
            <!-- dropdown  Filter-->
            <div class="dropdown ms-2 me-5">
                <a class="btn  btn-outline-primary dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    @timeDropdown
                </a>
                <ul class="dropdown-menu">
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="Tid">
                            <button input="submit" class="dropdown-item">Tid</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="00:00">
                            <button input="submit" class="dropdown-item">00:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="01:00">
                            <button input="submit" class="dropdown-item">01:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="02:00">
                            <button input="submit" class="dropdown-item">02:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="03:00">
                            <button input="submit" class="dropdown-item">03:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="04:00">
                            <button input="submit" class="dropdown-item">04:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="05:00">
                            <button input="submit" class="dropdown-item">05:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="06:00">
                            <button input="submit" class="dropdown-item">06:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="07:00">
                            <button input="submit" class="dropdown-item">07:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="08:00">
                            <button input="submit" class="dropdown-item">08:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="09:00">
                            <button input="submit" class="dropdown-item">09:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="10:00">
                            <button input="submit" class="dropdown-item">10:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="11:00">
                            <button input="submit" class="dropdown-item">11:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="12:00">
                            <button input="submit" class="dropdown-item">12:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="13:00">
                            <button input="submit" class="dropdown-item">13:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="14:00">
                            <button input="submit" class="dropdown-item">14:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="15:00">
                            <button input="submit" class="dropdown-item">15:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="16:00">
                            <button input="submit" class="dropdown-item">16:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="17:00">
                            <button input="submit" class="dropdown-item">17:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="18:00">
                            <button input="submit" class="dropdown-item">18:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="19:00">
                            <button input="submit" class="dropdown-item">19:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="20:00">
                            <button input="submit" class="dropdown-item">20:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="21:00">
                            <button input="submit" class="dropdown-item">21:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="22:00">
                            <button input="submit" class="dropdown-item">22:00</button>
                        </form>
                    </li>
                    <li>
                        <form method="post" asp-controller="Departures" asp-action="index">
                            <input type="hidden" name="time" value="23:00">
                            <button input="submit" class="dropdown-item">23:00</button>
                        </form>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Search -->
        <div class="mt-2 mb-2 d-flex card col-4">
            <form class="d-flex" method="post" asp-controller="Departures" asp-action="index">
                <input class="form-control me-2" type="text" name="filter" placeholder="Filter by flight or destination" value="@ViewBag.Filter">
                <button class="btn btn-outline-success" type="submit">Filter</button>
            </form>
        </div>

        <!-- Last updated -->
        <h6 class="pt-3 text-info text-end col-4">Last updated @(today.ToString("HH: mm"))</h6>

    </div>

    <!-- table -->
    <table class="table table-hover">
        <thead>
            <tr>
                <th scope="col" class="col-1">Tid</th>
                <th scope="col" class="col-2">Till</th>
                <th scope="col" class="col-2">FLIGHTNR</th>
                <th scope="col" class="col-1">TERMINAL</th>
                <th scope="col" class="col-5">STATUS</th>
            </tr>
        </thead>
        <tbody class="table-group-divider">

               @foreach (var flight in flights)
                {
                    @*<tr onclick="location.href='@Url.ActionLink("Index", "Departures", new { Id = 22 })'">*@
                    <tr onclick="location.href='@Url.ActionLink("Index", "Departures")'">
                        <th scope="row">@(flight.departureTime.scheduledUtc.ToString("HH: mm"))</th>
                        <td>@flight.arrivalAirportSwedish</td>
                        <td>@flight.flightId</td>
                        <td>@flight.locationAndStatus.terminal</td>
                        <td>@flight.locationAndStatus.flightLegStatusEnglish</td>
                    </tr>
                }      
        </tbody>
    </table>

</div>



